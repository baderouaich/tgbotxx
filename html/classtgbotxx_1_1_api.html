<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgbotxx: tgbotxx::Api Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgbotxx
   </div>
   <div id="projectbrief">Telegram Bot C++ Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classtgbotxx_1_1_api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtgbotxx_1_1_api-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tgbotxx::Api Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_api_8hpp_source.html">Api.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3f3c10fcdb01039733b30b74d3342095"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtgbotxx_1_1_api.html#a3f3c10fcdb01039733b30b74d3342095">Api</a> (const std::string &amp;token)</td></tr>
<tr class="memdesc:a3f3c10fcdb01039733b30b74d3342095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs <a class="el" href="classtgbotxx_1_1_api.html">Api</a> object.  <a href="classtgbotxx_1_1_api.html#a3f3c10fcdb01039733b30b74d3342095">More...</a><br /></td></tr>
<tr class="separator:a3f3c10fcdb01039733b30b74d3342095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5afff3c96f3812ccb323f66f9b938962"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtgbotxx_1_1_api.html#a5afff3c96f3812ccb323f66f9b938962">deleteWebhook</a> (bool dropPendingUpdates=false) const</td></tr>
<tr class="memdesc:a5afff3c96f3812ccb323f66f9b938962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this method to remove webhook integration if you decide to switch back to getUpdates. Returns True on success.  <a href="classtgbotxx_1_1_api.html#a5afff3c96f3812ccb323f66f9b938962">More...</a><br /></td></tr>
<tr class="separator:a5afff3c96f3812ccb323f66f9b938962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138c29b3e7836704b42aded39ed7f2c2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_update.html">Update</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtgbotxx_1_1_api.html#a138c29b3e7836704b42aded39ed7f2c2">getUpdates</a> (std::int32_t offset, std::int32_t limit=100, std::int32_t timeout=LONG_POLL_TIMEOUT, const std::vector&lt; std::string &gt; &amp;allowedUpdates={}) const</td></tr>
<tr class="memdesc:a138c29b3e7836704b42aded39ed7f2c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this method to receive incoming updates using long polling.  <a href="classtgbotxx_1_1_api.html#a138c29b3e7836704b42aded39ed7f2c2">More...</a><br /></td></tr>
<tr class="separator:a138c29b3e7836704b42aded39ed7f2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcbf6b1f63fa0e685274c7525f983518"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtgbotxx_1_1_api.html#abcbf6b1f63fa0e685274c7525f983518">setMyCommands</a> (const std::vector&lt; <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command.html">BotCommand</a> &gt;&gt; &amp;commands, const <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command_scope.html">BotCommandScope</a> &gt; &amp;scope=nullptr, const std::string &amp;languageCode=&quot;&quot;) const</td></tr>
<tr class="memdesc:abcbf6b1f63fa0e685274c7525f983518"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this method to change the list of the bot's commands. See this manual for more details about bot commands.  <a href="classtgbotxx_1_1_api.html#abcbf6b1f63fa0e685274c7525f983518">More...</a><br /></td></tr>
<tr class="separator:abcbf6b1f63fa0e685274c7525f983518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13bff65224b9e6f57919bff41b3c3e44"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command.html">BotCommand</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtgbotxx_1_1_api.html#a13bff65224b9e6f57919bff41b3c3e44">getMyCommands</a> (const <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command_scope.html">BotCommandScope</a> &gt; &amp;scope=nullptr, const std::string &amp;languageCode=&quot;&quot;) const</td></tr>
<tr class="memdesc:a13bff65224b9e6f57919bff41b3c3e44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this method to get the current list of the bot's commands for the given scope and user language.  <a href="classtgbotxx_1_1_api.html#a13bff65224b9e6f57919bff41b3c3e44">More...</a><br /></td></tr>
<tr class="separator:a13bff65224b9e6f57919bff41b3c3e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_api_8hpp_source.html#l00079">79</a> of file <a class="el" href="_api_8hpp_source.html">Api.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3f3c10fcdb01039733b30b74d3342095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f3c10fcdb01039733b30b74d3342095">&#9670;&nbsp;</a></span>Api()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tgbotxx::Api::Api </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs <a class="el" href="classtgbotxx_1_1_api.html">Api</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td><a class="el" href="classtgbotxx_1_1_bot.html">Bot</a> Token from FatherBot. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5afff3c96f3812ccb323f66f9b938962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5afff3c96f3812ccb323f66f9b938962">&#9670;&nbsp;</a></span>deleteWebhook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tgbotxx::Api::deleteWebhook </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dropPendingUpdates</em> = <code>false</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this method to remove webhook integration if you decide to switch back to getUpdates. Returns True on success. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dropPendingUpdates</td><td>Pass True to drop all pending updates. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>when <a class="el" href="classtgbotxx_1_1_bot.html">Bot</a> is not running, updates will remain 24 hours in Telegram server before they get deleted or retrieved by BOT </dd>
<dd>
In order for <a class="el" href="classtgbotxx_1_1_api.html#a138c29b3e7836704b42aded39ed7f2c2" title="Use this method to receive incoming updates using long polling.">Api::getUpdates()</a> to work, there should be no outgoing webhook set up. see <a href="https://core.telegram.org/bots/api#getupdates">https://core.telegram.org/bots/api#getupdates</a> <a class="el" href=""><a href="https://core.telegram.org/bots/api#deletewebhook">https://core.telegram.org/bots/api#deletewebhook</a> </a> </dd></dl>

</div>
</div>
<a id="a13bff65224b9e6f57919bff41b3c3e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13bff65224b9e6f57919bff41b3c3e44">&#9670;&nbsp;</a></span>getMyCommands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt;<a class="el" href="structtgbotxx_1_1_bot_command.html">BotCommand</a>&gt; &gt; tgbotxx::Api::getMyCommands </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command_scope.html">BotCommandScope</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>scope</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>languageCode</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this method to get the current list of the bot's commands for the given scope and user language. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scope</td><td>A JSON-serialized object, describing scope of users for which the commands are relevant. Defaults to <a class="el" href="structtgbotxx_1_1_bot_command_scope_default.html" title="Represents the default scope of bot commands. Default commands are used if no commands with a narrowe...">BotCommandScopeDefault</a>. </td></tr>
    <tr><td class="paramname">languageCode</td><td>A two-letter ISO 639-1 language code. If empty, commands will be applied to all users from the given scope, for whose language there are no dedicated commands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an Array of <a class="el" href="structtgbotxx_1_1_bot_command.html" title="This object represents a bot command. https://core.telegram.org/bots/api#botcommand.">BotCommand</a> objects. If commands aren't set, an empty list is returned. <a class="el" href=""><a href="https://core.telegram.org/bots/api#getmycommands">https://core.telegram.org/bots/api#getmycommands</a> </a> </dd></dl>

</div>
</div>
<a id="a138c29b3e7836704b42aded39ed7f2c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a138c29b3e7836704b42aded39ed7f2c2">&#9670;&nbsp;</a></span>getUpdates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt;<a class="el" href="structtgbotxx_1_1_update.html">Update</a>&gt; &gt; tgbotxx::Api::getUpdates </td>
          <td>(</td>
          <td class="paramtype">std::int32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::int32_t&#160;</td>
          <td class="paramname"><em>limit</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::int32_t&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>LONG_POLL_TIMEOUT</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>allowedUpdates</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this method to receive incoming updates using long polling. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>Identifier of the first update to be returned. Must be greater by one than the highest among the identifiers of previously received updates. By default, updates starting with the earliest unconfirmed update are returned. An update is considered confirmed as soon as getUpdates is called with an offset higher than its update_id. The negative offset can be specified to retrieve updates starting from -offset update from the end of the updates queue. All previous updates will be forgotten. </td></tr>
    <tr><td class="paramname">limit</td><td>Limits the number of updates to be retrieved. Values between 1-100 are accepted. Defaults to 100. </td></tr>
    <tr><td class="paramname">timeout</td><td>Timeout in seconds for long polling. Defaults to 0, i.e. usual short polling. Should be positive, short polling should be used for testing purposes only. </td></tr>
    <tr><td class="paramname">A</td><td>JSON-serialized list of the update types you want your bot to receive. For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. See <a class="el" href="structtgbotxx_1_1_update.html" title="This object represents an incoming update. At most one of the optional parameters can be present in a...">Update</a> for a complete list of available update types. Specify an empty list to receive all update types except chat_member (default). If not specified, the previous setting will be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>: Please note that this parameter doesn't affect updates created before the call to the getUpdates, so unwanted updates may be received for a short period of time. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>an Array of <a class="el" href="structtgbotxx_1_1_update.html" title="This object represents an incoming update. At most one of the optional parameters can be present in a...">Update</a> objects. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This method will not work if an outgoing webhook is set up. </dd>
<dd>
In order to avoid getting duplicate updates, recalculate offset after each server response. <a class="el" href=""><a href="https://core.telegram.org/bots/api#getupdates">https://core.telegram.org/bots/api#getupdates</a> </a> </dd></dl>

</div>
</div>
<a id="abcbf6b1f63fa0e685274c7525f983518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcbf6b1f63fa0e685274c7525f983518">&#9670;&nbsp;</a></span>setMyCommands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tgbotxx::Api::setMyCommands </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command.html">BotCommand</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>commands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacetgbotxx.html#a441cf8fce5bff655d159cf6aebc6ca43">Ptr</a>&lt; <a class="el" href="structtgbotxx_1_1_bot_command_scope.html">BotCommandScope</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>scope</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>languageCode</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this method to change the list of the bot's commands. See this manual for more details about bot commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commands</td><td>A JSON-serialized list of bot commands to be set as the list of the bot's commands. At most 100 commands can be specified. </td></tr>
    <tr><td class="paramname">scope</td><td>A JSON-serialized object, describing scope of users for which the commands are relevant. Defaults to <a class="el" href="structtgbotxx_1_1_bot_command_scope_default.html" title="Represents the default scope of bot commands. Default commands are used if no commands with a narrowe...">BotCommandScopeDefault</a>. </td></tr>
    <tr><td class="paramname">languageCode</td><td>A two-letter ISO 639-1 language code. If empty, commands will be applied to all users from the given scope, for whose language there are no dedicated commands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success. <a class="el" href=""><a href="https://core.telegram.org/bots/api#setmycommands">https://core.telegram.org/bots/api#setmycommands</a> </a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/tgbotxx/<a class="el" href="_api_8hpp_source.html">Api.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetgbotxx.html">tgbotxx</a></li><li class="navelem"><a class="el" href="classtgbotxx_1_1_api.html">Api</a></li>
    <li class="footer">Generated on Mon Sep 25 2023 17:43:23 for tgbotxx by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
